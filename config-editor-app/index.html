<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Agent Audio Notifications</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Settings</h1>
            <button class="btn-save" id="saveBtn" disabled title="Save your settings. Changes take effect immediately for new Claude sessions.">Save</button>
        </header>

        <!-- Main Settings -->
        <main class="main">
            <!-- Getting Started -->
            <div class="getting-started">
                <h2>Overview</h2>
                <p class="getting-started-text">
                    Use this tool to receive audio alerts when designated Claude Code events occur. This tool is intended to ensure that you are alerted as early as possible when Claude Code requires your input in order to proceed.
                    
                    This tool relies on Claude Code hooks to trigger the aforementioned audio alerts. Via the GUI below 
                    
                    - Audio alerts can be enabled on a per hook event basis.
                    - You have the ability to play different audio per hook event.
                    - You have the ability to upload custom audio.

                    At the time of this writing the following hooks are supported: 
                    
                    - Notification (fires when Claude needs permission)
                    - Stop (fires when Claude finishes responding)
                    - PostToolUse (fires after tool execution)
                    - SubagentStop (fires when subagent completes). <a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">Learn about hooks</a>
                </p>
            </div>

            <!-- Global Settings (shown when globalMode = true) -->
            <div id="globalSettings" class="settings-section">
                <div class="card">
                    <div class="setting-row">
                        <div class="setting-label">
                            <label for="globalEnabled" id="globalEnabledLabel">Coding agent audio notifications are currently enabled</label>
                            <p class="hint" id="globalEnabledHint">To disable notifications, please set this row's toggle to the "off" position.</p>
                        </div>
                        <input type="checkbox" id="globalEnabled" class="toggle">
                    </div>
                </div>

                <h2 class="hooks-header"><a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link hooks-link">Hooks</a> that are eligible for audio notifications</h2>
                <p class="hint" style="margin-bottom: 16px;">Claude Code hooks are user-defined shell commands that execute at various points in Claude Code's lifecycle (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide" target="_blank" class="inline-link hooks-guide-link">documentation</a>)</p>

                <div class="card">
                    <!-- Column headers -->
                    <div class="table-header">
                        <div class="table-header-cell">Event</div>
                        <div class="table-header-controls">
                            <div class="table-header-cell" style="min-width: 160px; text-align: left;">Sound</div>
                            <div class="table-header-cell" style="min-width: 36px;"></div>
                            <div class="table-header-cell" style="min-width: 44px; text-align: center;">Enabled</div>
                        </div>
                    </div>

                    <div class="setting-row">
                        <div class="setting-label">
                            <label for="notificationSound">Notification</label>
                            <p class="hint">Executes whenever Claude sends a notification (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                        </div>
                        <div class="sound-control">
                            <select id="notificationSound" class="sound-select"></select>
                            <button class="btn-play" data-sound="notification" title="Preview this sound">▶</button>
                            <input type="checkbox" id="notificationEnabled" class="toggle" checked>
                        </div>
                    </div>

                    <div class="setting-row">
                        <div class="setting-label">
                            <label for="stopSound">Stop</label>
                            <p class="hint">Executes when Claude finishes generating its response (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                        </div>
                        <div class="sound-control">
                            <select id="stopSound" class="sound-select"></select>
                            <button class="btn-play" data-sound="stop" title="Preview this sound">▶</button>
                            <input type="checkbox" id="stopEnabled" class="toggle" checked>
                        </div>
                    </div>

                    <div class="setting-row">
                        <div class="setting-label">
                            <label for="postToolUseSound">PostToolUse</label>
                            <p class="hint">Executes after a tool has been used successfully (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                        </div>
                        <div class="sound-control">
                            <select id="postToolUseSound" class="sound-select"></select>
                            <button class="btn-play" data-sound="postToolUse" title="Preview this sound">▶</button>
                            <input type="checkbox" id="postToolUseEnabled" class="toggle" checked>
                        </div>
                    </div>

                    <div class="setting-row">
                        <div class="setting-label">
                            <label for="subagentStopSound">SubagentStop</label>
                            <p class="hint">Runs when subagent tasks complete (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                        </div>
                        <div class="sound-control">
                            <select id="subagentStopSound" class="sound-select"></select>
                            <button class="btn-play" data-sound="subagentStop" title="Preview this sound">▶</button>
                            <input type="checkbox" id="subagentStopEnabled" class="toggle" checked>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Per-Project Settings (shown when globalMode = false) -->
            <div id="projectSettings" class="settings-section" style="display: none;">
                <div class="info-banner">
                    Notifications will only play for projects you enable below.
                </div>

                <div id="projectList" class="project-list">
                    <!-- Projects will be inserted here dynamically -->
                </div>

                <button class="btn-add" id="addProjectBtn">+ Enable coding agent audio notifications for a new project</button>
            </div>

            <!-- Add Custom Audio -->
            <div class="card">
                <h2>Add custom audio</h2>
                <p class="hint">Manage custom sounds. System sounds are available in the dropdowns above. Supported formats: .aiff, .wav, .mp3</p>

                <div id="customSounds" class="sound-library">
                    <!-- Custom sound items will be inserted here -->
                </div>
                <button class="btn-add" id="uploadSoundBtn">+ Upload audio</button>
            </div>

            <!-- Global Toggle -->
            <div class="card">
                <div class="setting-row">
                    <div class="setting-label">
                        <label for="globalMode">Apply to all projects</label>
                        <p class="hint">When enabled, same sounds play everywhere. When disabled, configure sounds per project.</p>
                    </div>
                    <input type="checkbox" id="globalMode" class="toggle">
                </div>
            </div>
        </main>
    </div>

    <script type="module" src="/main.js"></script>
</body>
</html>
