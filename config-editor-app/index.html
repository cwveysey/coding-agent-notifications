<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Agent Audio Notifications</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>Coding agent audio notifications</h1>
            <button class="btn-save" id="saveBtn" disabled style="display: none;" title="Save your settings. Changes take effect immediately for new Claude sessions.">Save</button>
        </header>

        <div class="layout">
            <!-- Left Navigation -->
            <nav class="sidebar">
                <div class="nav-item active" data-view="overview">Overview</div>
                <div class="nav-item" data-view="claude-code">Claude Code</div>
                <div class="nav-item" data-view="custom-sounds">Audio library</div>
                <div class="nav-item" data-view="faq">FAQ</div>
                <div class="nav-item" data-view="support">Support</div>
            </nav>

            <!-- Main Content Area -->
            <main class="main">
                <!-- Overview View -->
                <div class="view active" data-view="overview">
                    <!-- Dev Panel (temporary) -->
                    <div id="devPanel" class="info-banner" style="background: #fff3cd; border-color: #ffc107; margin-bottom: 24px;">
                        <h3 style="margin-top: 0;">⚠️ Developer Testing</h3>
                        <p>Click the button below to reset to a fresh install state. This will delete all installed files and show the install banner.</p>
                        <button id="devResetBtn" class="btn" style="background: #dc3545; color: white; margin-top: 8px;">Reset to Fresh Install</button>
                    </div>

                    <div class="getting-started">
                        <h2>What are the benefits of using this tool?</h2>
                        <p class="getting-started-text">
                            Use this tool to receive audio alerts when designated coding agent events occur. It is intended to:
                        </p>
                        <ul class="getting-started-text">
                            <li>Help ensure that you are alerted as early as possible whenever a coding agent might benefit from your input.</li>
                            <li>Free you from having to actively monitor whether or not a coding agent requires your input.</li>
                        </ul>

                        <h2>Getting started</h2>

                        <!-- Install Section (Auto-installs on first launch) -->
                        <div id="installSection" style="display: none; margin: 48px 0; padding: 48px 0; border-top: 1px solid rgba(0, 0, 0, 0.08); border-bottom: 1px solid rgba(0, 0, 0, 0.08);">
                            <div style="max-width: 560px; margin: 0 auto; text-align: center;">
                                <div style="margin-bottom: 24px;">
                                    <svg style="width: 48px; height: 48px; animation: spin 1s linear infinite;" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10" stroke="#1a73e8" stroke-width="2" fill="none" stroke-dasharray="60" stroke-dashoffset="20" stroke-linecap="round"/>
                                    </svg>
                                    <style>
                                        @keyframes spin {
                                            0% { transform: rotate(0deg); }
                                            100% { transform: rotate(360deg); }
                                        }
                                    </style>
                                </div>
                                <h3 style="font-size: 20px; margin: 0 0 16px 0; color: #202124; font-weight: 500;">Installing audio notifications...</h3>
                                <p style="font-size: 15px; line-height: 1.7; color: #5f6368; margin-bottom: 32px; font-weight: 400;">
                                    Setting up your audio notification system. This will only take a moment.
                                </p>
                                <ul style="text-align: left; list-style: none; padding: 0; margin: 0; color: #5f6368; font-size: 14px; line-height: 2;">
                                    <li style="padding-left: 24px; position: relative;">
                                        <span style="position: absolute; left: 0; color: #1a73e8;">→</span>
                                        Installing scripts to <code style="background: #f8f9fa; padding: 2px 6px; border-radius: 3px; font-size: 13px;">~/.claude/scripts/</code>
                                    </li>
                                    <li style="padding-left: 24px; position: relative;">
                                        <span style="position: absolute; left: 0; color: #1a73e8;">→</span>
                                        Configuring Claude Code hooks
                                    </li>
                                    <li style="padding-left: 24px; position: relative;">
                                        <span style="position: absolute; left: 0; color: #1a73e8;">→</span>
                                        Enabling audio notifications
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Claude Code View -->
                <div class="view" data-view="claude-code" style="display: none;">
                    <div class="card">
                        <!-- Column headers -->
                        <div class="table-header">
                            <div class="table-header-cell">Event</div>
                            <div class="table-header-controls">
                                <div class="table-header-cell sound-header">Sound</div>
                                <div class="table-header-cell play-header"></div>
                                <div class="table-header-cell enabled-header">Enabled</div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="notificationSound">Notification</label>
                                <p class="hint">Runs when Claude Code sends notifications (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                            </div>
                            <div class="sound-control">
                                <select id="notificationSound" class="sound-select"></select>
                                <button class="btn-play" data-sound="notification" title="Preview this sound">▶</button>
                                <input type="checkbox" id="notificationEnabled" class="toggle" checked>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="stopSound">Stop</label>
                                <p class="hint">Runs when Claude Code finishes responding (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                            </div>
                            <div class="sound-control">
                                <select id="stopSound" class="sound-select"></select>
                                <button class="btn-play" data-sound="stop" title="Preview this sound">▶</button>
                                <input type="checkbox" id="stopEnabled" class="toggle" checked>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="preToolUseSound">PreToolUse</label>
                                <p class="hint">Runs before tool calls (permission prompts) (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                            </div>
                            <div class="sound-control">
                                <select id="preToolUseSound" class="sound-select"></select>
                                <button class="btn-play" data-sound="preToolUse" title="Preview this sound">▶</button>
                                <input type="checkbox" id="preToolUseEnabled" class="toggle" checked>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="postToolUseSound">PostToolUse</label>
                                <p class="hint">Runs after tool calls complete (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                            </div>
                            <div class="sound-control">
                                <select id="postToolUseSound" class="sound-select"></select>
                                <button class="btn-play" data-sound="postToolUse" title="Preview this sound">▶</button>
                                <input type="checkbox" id="postToolUseEnabled" class="toggle" checked>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="subagentStopSound">SubagentStop</label>
                                <p class="hint">Runs when subagent tasks complete (<a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">documentation</a>)</p>
                            </div>
                            <div class="sound-control">
                                <select id="subagentStopSound" class="sound-select"></select>
                                <button class="btn-play" data-sound="subagentStop" title="Preview this sound">▶</button>
                                <input type="checkbox" id="subagentStopEnabled" class="toggle" checked>
                            </div>
                        </div>
                    </div>

                    <!-- Focus Settings -->
                    <h2 class="hooks-header" style="margin-top: 32px;">Focus settings</h2>
                    <div class="card">
                        <div class="setting-row">
                            <div class="setting-label">
                                <label for="respectDND">Silence this application "when you have Focus turned on"</label>
                                    <p class="hint"> If this toggle is in the on position, then this application's audio will not play while any "Focus" is "turned on."
                                    If this toggle is in the off position, then this application's audio will play regardless of whether or not a Focus is turned on.
                                    <br><br>
                                Do Not Disturb, Work, and Sleep are all examples of <a href="https://support.apple.com/guide/mac-help/change-focus-settings-mchlff5da36d/mac" target="_blank" class="inline-link">what Apple refers to as "Focuses."</a>
                            </p>
                            </div>
                            <div class="sound-control">
                                <input type="checkbox" id="respectDND" class="toggle">
                            </div>
                        </div>
                    </div>

                    <div class="getting-started">
                        <details class="collapsible-section">
                            <summary class="collapsible-header">
                                <h2>How does this work?</h2>
                            </summary>
                            <div class="collapsible-content">
                                <p class="getting-started-text">
                                    This tool relies on <a href="https://docs.claude.com/en/docs/claude-code/hooks-guide#hook-events-overview" target="_blank" class="inline-link">Claude Code hooks</a> to trigger audio alerts. At the time of this writing the following hooks are supported:
                                </p>
                                <ul class="getting-started-text">
                                    <li><strong>Notification</strong> - runs when Claude Code sends notifications.</li>
                                    <li><strong>Stop</strong> - runs when Claude Code finishes responding.</li>
                                    <li><strong>PreToolUse</strong> - runs before tool calls (permission prompts).</li>
                                    <li><strong>PostToolUse</strong> - runs after tool calls complete.</li>
                                    <li><strong>SubagentStop</strong> - runs when subagent tasks complete.</li>
                                </ul>
                            </div>
                        </details>

                        <details class="collapsible-section">
                            <summary class="collapsible-header">
                                <h2>Some customization options</h2>
                            </summary>
                            <div class="collapsible-content">
                                <p class="getting-started-text">
                                    Using the controls above:
                                </p>
                                <ul class="getting-started-text">
                                    <li>You can turn audio alerts on and off on a per hook type basis.</li>
                                    <li>You can arrange for different audio to play on a per hook type basis.</li>
                                    <li>You can arrange for custom audio to be used for Claude Code audio alerts.</li>
                                    <li>You can choose whether or not Claude Code audio alerts are silenced if <a href="https://support.apple.com/guide/mac-help/change-focus-settings-mchlff5da36d/mac" target="_blank" class="inline-link">any Apple "Focuses"</a> are turned on.</li>
                                </ul>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Audio Library View -->
                <div class="view" data-view="custom-sounds" style="display: none;">
                    <div class="getting-started">
                        <h2>Audio library</h2>
                        <p class="getting-started-text">
                            By default Apple's native alert sounds, as well as some AI-generated audio from <a href="https://fish.audio/" target="_blank" class="inline-link">Fish Audio</a>, can be used for this application's audio notifications. You can also upload your own audio using the button below. <br><br>Supported formats: .aiff, .wav, .mp3
                        </p>
                    </div>

                    <div class="card">
                        <h2>Your audio files</h2>
                        <div id="customSounds" class="sound-library">
                            <!-- Custom sound items will be inserted here -->
                        </div>
                        <button class="btn-add" id="uploadSoundBtn">+ Upload audio</button>
                    </div>
                </div>

                <!-- FAQ View -->
                <div class="view" data-view="faq" style="display: none;">
                    <div class="getting-started">
                        <h2>Frequently Asked Questions</h2>

                        <details class="collapsible-section faq-item">
                            <summary class="collapsible-header">
                                <h3 class="faq-question">What coding agents are supported by this tool?</h3>
                            </summary>
                            <div class="collapsible-content">
                                <p class="faq-answer">At present exclusively Claude Code. I would be happy to add support for <a href="https://github.com/features/copilot" target="_blank" class="inline-link">Codex</a>, <a href="https://www.jules.ai" target="_blank" class="inline-link">Jules</a>, <a href="https://www.droids.dev" target="_blank" class="inline-link">Droids</a>, etc if there winds up being demand for that. <a href="mailto:cwveysey@gmail.com" class="inline-link">Let me know!</a></p>
                            </div>
                        </details>

                        <details class="collapsible-section faq-item">
                            <summary class="collapsible-header">
                                <h3 class="faq-question">Aren't there a bunch of tools that do this already? Why should I use this one instead?</h3>
                            </summary>
                            <div class="collapsible-content">
                                <p class="faq-answer">There are definitely many alternatives, and I am sure that a number of them are great. I will share links to some of the alternatives below, and would encourage anyone reading this to evaluate different options and to choose the tool that best fits their needs. I also want to note that someone that is comfortable with script editing (or working with coding agents) could "roll their own" solution for coding agent notifications without much time and effort. In the meantime, some reasons to use our tool:
                                    <br>
                                <ul class="faq-answer" style="margin-left: 20px; margin-top: 8px;">
                                    <li><strong>It takes less than 60 seconds to install and start using our solution</strong> - Our tool is installed via a one-line terminal command or three GUI clicks. Following installation there is no additional setup required.</li>
                                    <li><strong>There is no setup or manual configuration required after installation</strong> - No JSON or YAML files need to be modified, no scripts need to executed. As soon as installation finishes you'll start receiving audio notifications when designated events occur.</li>
                                    <li><strong>Sensible default values and thoughtful customization capabilities</strong> - As communicated via <a href="#" class="inline-link" onclick="event.preventDefault(); document.querySelector('[data-view=claude-code]').click();">this section</a>:
                                        <ul style="margin-left: 20px; margin-top: 4px; list-style-type: circle;">
                                            <li>Alerts can be turned on and off on a per hook type basis.</li>
                                            <li>You can arrange for different audio to play on a per hook type basis.</li>
                                            <li>You can use custom audio for your alerts.</li>
                                            <li>You can customize how Apple "Focuses" affect your coding agent alerts.</li>
                                        </ul>
                                    </li>
                                    <li><strong>GUI for customization</strong> - Easy interface for configuring sounds and settings</li>
                                    <li><strong>No background process required</strong> - This app does not need to be running in order for the solution to work. Install the app once and feel free not to open it again.</li>
                                    <li><strong>Native macOS integration</strong> - Everything runs locally on your Mac using native macOS features. Our notifications rely on macOS Notification Center, as a result this application's alerts can be reviewed in your Notification Center notification history and respect your notification preferences. </li>
                                </ul>

                                <h4 style="margin-top: 24px; margin-bottom: 12px; font-size: 16px;">Some notable alternative solutions</h4>
                                <ul class="faq-answer" style="margin-left: 20px; margin-top: 8px;">
                                    <li><strong><a href="https://github.com/wyattjoh/claude-code-notification" target="_blank" class="inline-link">claude-code-notification</a></strong> - CLI tool with 16 GitHub stars. Last commit to main was 9/9/2025</li>
                                    <li><strong><a href="https://github.com/daveschumaker/homebrew-claude-sounds" target="_blank" class="inline-link">claude-sounds</a></strong> - CLI tool with 1 GitHub star. Last commit to main was 10/25/2025 </li>
                                    <li><strong><a href="https://github.com/julienXX/terminal-notifier" target="_blank" class="inline-link">terminal-notifier</a></strong> - Popular macOS notification tool requiring manual setup</li>
                                    <li><strong><a href="https://velvetshark.com/til/claude-code-sound-notification" target="_blank" class="inline-link">Terminal Bell</a></strong> - "This command tells Claude Code to use the terminal's built-in bell as its sound notification channel. After you run this, you'll hear a simple system beep whenever a long-running command completes.

It's not as fancy as a custom sound, but it's a game-changer for productivity. You can kick off a build, a test suite, or a code generation task, switch to another window, and wait for the beep. No more constant context-switching to check on progress."</li>
                                    <li><strong><a href="https://justin.searls.co/posts/notify-your-iphone-or-watch-when-claude-code-finishes/" target="_blank" class="inline-link">Pushcut for iPhone/Watch</a></strong> - Send notifications to your mobile devices (~$2/month)</li>
                                </ul>

                                <details class="collapsible-section" style="margin-top: 24px;">
                                    <summary class="collapsible-header">
                                        <h4 style="font-size: 16px; display: inline;">Detailed comparison with alternatives</h4>
                                    </summary>
                                    <div class="collapsible-content">
                                    <div style="overflow-x: auto;">
                                        <table class="comparison-table">
                                            <thead>
                                                <tr>
                                                    <th>Feature</th>
                                                    <th>This Tool</th>
                                                    <th>Terminal<br/>Bell</th>
                                                    <th><a href="https://github.com/wyattjoh/claude-code-notification" target="_blank" class="inline-link">claude-code-<br/>notification</a></th>
                                                    <th><a href="https://github.com/julienXX/terminal-notifier" target="_blank" class="inline-link">terminal-<br/>notifier</a></th>
                                                    <th>Custom<br/>Scripts</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>Automated installation</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓<br/><span style="font-size: 11px;">(built-in)</span></td>
                                                    <td class="partial">△<br/><span style="font-size: 11px;">(brew)</span></td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>GUI configuration</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>No coding required</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="partial">△<br/><span style="font-size: 11px;">(JSON)</span></td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Custom sounds</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Event-specific sounds</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                    <td class="partial">△<br/><span style="font-size: 11px;">(manual)</span></td>
                                                    <td class="check">✓</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Visual notifications</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="partial">△</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>DND/Focus control</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                    <td class="partial">△<br/><span style="font-size: 11px;">(manual)</span></td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Performance</strong></td>
                                                    <td class="check">Good</td>
                                                    <td class="check">Excellent</td>
                                                    <td class="check">Excellent<br/><span style="font-size: 11px;">(Rust)</span></td>
                                                    <td class="check">Good</td>
                                                    <td class="partial">Varies</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Free & open source</strong></td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>No installation needed</strong></td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                    <td class="cross">✗</td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Full customization</strong></td>
                                                    <td class="partial">△<br/><span style="font-size: 11px;">(GUI)</span></td>
                                                    <td class="cross">✗</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                    <td class="check">✓</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <p class="faq-answer" style="margin-top: 16px; font-size: 13px; color: #666;">
                                        <strong>Legend:</strong> ✓ = Supported, ✗ = Not supported, △ = Partial/Manual setup required
                                    </p>
                                </div>
                            </details>
                            </div>
                        </details>

                        <details class="collapsible-section faq-item">
                            <summary class="collapsible-header">
                                <h3 class="faq-question">Do Apple "Focuses" (e.g. "Do Not Disturb," Work, Sleep) silence this app's notifications?</h3>
                            </summary>
                            <div class="collapsible-content">
                            <p class="faq-answer"><strong>Visual notifications:</strong> Always blocked by Do Not Disturb and Focus modes - this cannot be changed. Visual notifications use macOS Notification Center (via terminal-notifier), which is controlled by the operating system. When DND/Focus mode is active, macOS blocks all visual notifications automatically.</p>
                            <p class="faq-answer" style="margin-top: 8px;"><strong>Audio notifications:</strong> Configurable. By default, audio plays regardless of Focus mode to ensure you never miss important Claude Code events. Audio plays directly via <code>afplay</code>, which bypasses Notification Center, giving you control over whether it respects DND.</p>
                            <p class="faq-answer" style="margin-top: 8px;"><strong>How to silence audio during Focus modes:</strong> Enable "Silence audio during Do Not Disturb / Focus modes" in the General Settings section (Overview tab). This works with all macOS Focus modes including Do Not Disturb, Sleep, Work, Personal, and custom Focus modes. Detection happens automatically using built-in macOS commands - no additional setup required.</p>
                            </div>
                        </details>
<!-- If this toggle is in the on position, then this application's audio will not play while any "Focus" is "turned on." If this toggle is in the off position, then this application's audio will play regardless of whether or not a Focus is turned on.

Do Not Disturb, Work, and Sleep are all examples of what Apple refers to as "Focuses." -->
                        <details class="collapsible-section faq-item">
                            <summary class="collapsible-header">
                                <h3 class="faq-question">Where are the rest of the FAQs?</h3>
                            </summary>
                            <div class="collapsible-content">
                                <p class="faq-answer">I will further populate this section as more questions are shared!</p>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Support View -->
                <div class="view" data-view="support" style="display: none;">
                    <div class="getting-started">
                        <h2>Support</h2>
                        <p class="getting-started-text">
                            If you have any questions, encounter any issues, or would like to request an update, <a href="mailto:cwveysey@gmail.com" class="inline-link">please drop me a line via email</a>. Any and all feedback is of course so appreciated.
                        </p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script type="module" src="/main.js"></script>
</body>
</html>
